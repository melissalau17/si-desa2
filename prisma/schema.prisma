generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  user_id   Int     @id @default(autoincrement())
  NIK       String  @unique(map: "User_NIK_key")
  nama      String
  no_hp     String
  jenis_kel String
  alamat    String
  agama     String
  username  String
  password  String
  photo_url String? @db.VarChar(255)
  role      String  @default("user")
  email     String? @db.VarChar(255)

  // back relation
  laporans Laporan[]

  @@map("user")
}

model Keuangan {
  keuangan_id    Int      @id @default(autoincrement())
  jenisTransaksi String
  keterangan     String
  kategori       String
  tanggal        DateTime
  jumlah         Decimal  @db.Decimal(15, 2)
  catatan        String

  @@map("keuangan")
}

model Berita {
  berita_id Int     @id @default(autoincrement())
  judul     String
  kategori  String
  photo_url String? @db.VarChar(255)
  tanggal   String?
  kontent   String
  status    String

  @@map("berita")
}

model Laporan {
  laporan_id Int     @id @default(autoincrement())
  keluhan    String
  deskripsi  String
  photo_url  String? @db.VarChar(255)
  tanggal    String?
  lokasi     String
  vote       Int?    @default(0)
  status     String

  // relation
  user_id Int?
  user    User?   @relation(fields: [user_id], references: [user_id])

  @@map("laporan")
}

model Surat {
  surat_id       Int       @id @default(autoincrement())
  nama           String
  nik            String
  tempat_lahir   String?
  jenis_kelamin  String?
  agama          String?
  alamat         String
  jenis_surat    String
  tujuan_surat   String
  photo_ktp      String?  @db.VarChar(255)
  photo_kk       String?  @db.VarChar(255)
  foto_usaha     String?  @db.VarChar(255)
  waktu_kematian String?
  gaji_ortu      String?
  tanggal        DateTime  @default(now())
  status         String?   @db.VarChar(50)
  no_hp          String?
  email          String?   @default("")

  @@map("surat")
}